puts "TODO CR23096 ALL: TPSTAT : Faulty" 
puts "TODO CR23096 ALL: STATSHAPE : Faulty" 

set filename tr9_r0601-td.stp


ReadFileToDoc ${filename}

puts "Check document D_First"
puts "Compare with reference data"
checkdoc "data c" -max_warns 0 -max_faults 0
checkdoc "tpstat c" -max_warns 1 -max_faults 0
checkxstat D_First -n0 1 -n1 4242 -n2 0 -total 4243 -withname 1 -withcolor 4242 -withlayer 4242 -centroid 0 -volume 0 -area 0 -colors { RED WHITE } -nbcolors 2 -layers { 001 002 003 004 005 008 009 010 011 012 015 016 017 018 029 030 031 032 033 034 035 036 037 096 097 099 100 101 138 139 175 176 177 178 181 182 183 245 246 } -nblayers 39

XGetOneShape res_1 D_First

puts "Check shape from document D_First"
checkshapeff res_1 -max_wires 0 -max_faces 0 -max_shells 0 -max_solids 0
checknbshapes res_1 -solid 0 -shell 61 -face 4242 -shape 42462
checkstatshape res_1 -solid 0 -shell 61 -face 4242 -freewire 0 -freeedge 0 -sharededge 17100
set max_tol_res_1 [checkmaxtol res_1 -tol 0.0009787303794 -avg 8.698017989e-007]

ReOpenDoc ${filename}

XGetOneShape res_2 D_Second

puts "Check document D_Second"
puts "Compare with document D_First"
checkdoc "data c" -max_warns 0 -max_faults 0
checkdoc "tpstat c" -max_warns 1 -max_faults 0
puts "Compare with reference data"
checkdoc "data c" -max_warns 0 -max_faults 0
checkdoc "tpstat c" -max_warns 194 -max_faults 0

puts "Compare with doc D_First"
checkxstat D_Second -n0 1 -n1 4242 -n2 0 -total 4243 -withname 1 -withcolor 4242 -withlayer 4242 -centroid 0 -volume 0 -area 0 -nbcolors 2 -nblayers 39

puts "Compare with reference values"
checkxstat D_Second -n0 1 -n1 4242 -n2 0 -total 4243 -withname 1 -withcolor 4242 -withlayer 4242 -centroid 0 -volume 0 -area 0 -colors { RED WHITE  } -nbcolors 2 -layers { 001 002 003 004 005 008 009 010 011 012 015 016 017 018 029 030 031 032 033 034 035 036 037 096 097 099 100 101 138 139 175 176 177 178 181 182 183 245 246  } -nblayers 39

puts "Check shape from document D_Second"
puts "Compare with shape res_1"
checkshapeff res_2 -max_wires 0 -max_faces 0 -max_shells 0 -max_solids 0
puts "Compare with reference data"
checkshapeff res_2 -max_wires 0 -max_faces 0 -max_shells 0 -max_solids 0
set nbshapes_res_1 [nbshapes res_1]
regexp {SHAPE +: +([-0-9.+eE]+)} ${nbshapes_res_1} full shape_res_1
checknbshapes res_2 -solid 0 -shell 4242 -face 4242 -shape 46642 -not_de_iges ${shape_res_1}
checkstatshape res_2 -solid 0 -shell 4242 -face 4242 -freewire 0 -freeedge 0 -sharededge 17100 -max_solid 0 -max_shell 61 -max_face 4242 -max_freewire 0 -max_freeedge 0
checkmaxtol res_2 -tol 0.0003292944598 -avg 3.190255905e-007 -max_tol ${max_tol_res_1}

