puts "TODO CR23096 ALL: LABELS : Faulty" 
puts "TODO CR23096 ALL: LAYERS : Faulty" 

set filename PRO11713.igs


ReadFileToDoc ${filename}

puts "Check document D_First"
puts "Compare with reference data"
checkdoc "data c" -max_warns 0 -max_faults 0
checkdoc "tpstat c" -max_warns 8228 -max_faults 0
checkxstat D_First -n0 42695 -n1 0 -n2 0 -total 42695 -withname 42695 -withcolor 0 -withlayer 42695 -centroid 0 -volume 0 -area 0 -colors {  } -nbcolors 0 -layers { 1 101 106 111 131 132 141 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 163 164 165 166 167 168 169 170 171 176 177 180 181 182 183 184 185 187 188 189 190 191 192 193 194 195 196 197 199 207 21 211 212 22 228 229 230 231 235 236 254 3 31 32 36 37 4 51 52 53 56 6 61 62 63 7 71 72 73 74 76 77 78 79 81 82 91 } -nblayers 91

XGetOneShape res_1 D_First

puts "Check shape from document D_First"
checkshapeff res_1 -max_wires 0 -max_faces 0 -max_shells 0 -max_solids 0
checknbshapes res_1 -solid 0 -shell 0 -face 127 -shape 238094
checkstatshape res_1 -solid 0 -shell 0 -face 127 -freewire 8189 -freeedge 93645 -sharededge 94153
set max_tol_res_1 [checkmaxtol res_1 -tol 1.000100071e-007 -avg 1.000000046e-007]

ReOpenDoc ${filename}

XGetOneShape res_2 D_Second

puts "Check document D_Second"
puts "Compare with document D_First"
checkdoc "data c" -max_warns 0 -max_faults 0
checkdoc "tpstat c" -max_warns 8228 -max_faults 0
puts "Compare with reference data"
checkdoc "data c" -max_warns 0 -max_faults 0
checkdoc "tpstat c" -max_warns 33 -max_faults 0

puts "Compare with doc D_First"
checkxstat D_Second -n0 42695 -n1 0 -n2 0 -total 42695 -withname 42695 -withcolor 0 -withlayer 42695 -centroid 0 -volume 0 -area 0 -nbcolors 0 -nblayers 91

puts "Compare with reference values"
checkxstat D_Second -n0 42695 -n1 0 -n2 0 -total 42695 -withname 42695 -withcolor 0 -withlayer 33059 -centroid 0 -volume 0 -area 0 -colors {   } -nbcolors 0 -layers { 1 101 106 111 131 132 141 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 163 164 165 166 167 168 169 170 171 176 177 180 181 182 183 184 185 187 188 189 190 192 193 194 195 196 197 207 21 211 212 22 228 229 230 231 235 236 254 3 31 32 36 37 4 51 52 53 56 61 62 63 71 72 73 74 76 77 78 79 81 82 91  } -nblayers 87

puts "Check shape from document D_Second"
puts "Compare with shape res_1"
checkshapeff res_2 -max_wires 0 -max_faces 0 -max_shells 0 -max_solids 0
puts "Compare with reference data"
checkshapeff res_2 -max_wires 0 -max_faces 0 -max_shells 0 -max_solids 0
set nbshapes_res_1 [nbshapes res_1]
regexp {SHAPE +: +([-0-9.+eE]+)} ${nbshapes_res_1} full shape_res_1
regexp {COMPOUND +: +([-0-9.+eE]+)} ${nbshapes_res_1} full comp_res_1
set shape_comp_res_1 [expr ${shape_res_1} - ${comp_res_1}]
checknbshapes res_2 -solid 0 -shell 0 -face 127 -shape 238094 -de_iges ${shape_comp_res_1}
checkstatshape res_2 -solid 0 -shell 0 -face 127 -freewire 8189 -freeedge 93645 -sharededge 94153 -max_solid 0 -max_shell 0 -max_face 127 -max_freewire 8189 -max_freeedge 93645
checkmaxtol res_2 -tol 1.000100036e-007 -avg 1.000000246e-007 -max_tol ${max_tol_res_1}

