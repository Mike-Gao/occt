puts "TODO CR23096 ALL: LABELS : Faulty" 
puts "TODO CR23096 ALL: COLORS : Faulty" 
puts "TODO CR23096 ALL: LAYERS : Faulty" 

set filename So5571b.igs


ReadFileToDoc ${filename}

puts "Check document D_First"
puts "Compare with reference data"
checkdoc "data c" -max_warns 0 -max_faults 1
checkdoc "tpstat c" -max_warns 139 -max_faults 0
checkxstat D_First -n0 139 -n1 0 -n2 0 -total 139 -withname 139 -withcolor 139 -withlayer 139 -centroid 0 -volume 0 -area 0 -colors { CYAN1 } -nbcolors 1 -layers { 10 100 101 102 103 104 105 106 107 108 109 11 110 111 112 113 114 115 116 117 118 119 12 120 121 122 123 124 125 126 127 128 129 13 130 131 132 133 134 135 136 137 138 139 14 140 15 16 17 18 19 2 20 21 22 23 24 25 26 27 28 29 3 30 31 32 33 34 35 36 37 38 39 4 40 41 42 43 44 45 46 47 48 49 5 50 51 52 53 54 55 56 57 58 59 6 60 61 62 63 64 65 66 67 68 69 7 70 71 72 73 74 75 76 77 78 79 8 80 81 82 83 84 85 86 87 88 89 9 90 91 92 93 94 95 96 97 98 99 } -nblayers 139

XGetOneShape res_1 D_First

puts "Check shape from document D_First"
checkshapeff res_1 -max_wires 0 -max_faces 0 -max_shells 0 -max_solids 0
checknbshapes res_1 -solid 0 -shell 0 -face 0 -shape 39929
checkstatshape res_1 -solid 0 -shell 0 -face 0 -freewire 139 -freeedge 19825 -sharededge 19825
set max_tol_res_1 [checkmaxtol res_1 -tol 1.000100004e-07 -avg 1.000000178e-07]

ReOpenDoc ${filename}

XGetOneShape res_2 D_Second

puts "Check document D_Second"
puts "Compare with document D_First"
checkdoc "data c" -max_warns 0 -max_faults 1
checkdoc "tpstat c" -max_warns 139 -max_faults 0
puts "Compare with reference data"
checkdoc "data c" -max_warns 0 -max_faults 0
checkdoc "tpstat c" -max_warns 0 -max_faults 0

puts "Compare with doc D_First"
checkxstat D_Second -n0 139 -n1 0 -n2 0 -total 139 -withname 139 -withcolor 139 -withlayer 139 -centroid 0 -volume 0 -area 0 -nbcolors 1 -nblayers 139

puts "Compare with reference values"
checkxstat D_Second -n0 139 -n1 0 -n2 0 -total 139 -withname 139 -withcolor 0 -withlayer 0 -centroid 0 -volume 0 -area 0 -colors {   } -nbcolors 0 -layers {   } -nblayers 0

puts "Check shape from document D_Second"
puts "Compare with shape res_1"
checkshapeff res_2 -max_wires 0 -max_faces 0 -max_shells 0 -max_solids 0
puts "Compare with reference data"
checkshapeff res_2 -max_wires 0 -max_faces 0 -max_shells 0 -max_solids 0
set nbshapes_res_1 [nbshapes res_1]
regexp {SHAPE +: +([-0-9.+eE]+)} ${nbshapes_res_1} full shape_res_1
regexp {COMPOUND +: +([-0-9.+eE]+)} ${nbshapes_res_1} full comp_res_1
set shape_comp_res_1 [expr ${shape_res_1} - ${comp_res_1}]
checknbshapes res_2 -solid 0 -shell 0 -face 0 -shape 39929 -de_iges ${shape_comp_res_1}
checkstatshape res_2 -solid 0 -shell 0 -face 0 -freewire 139 -freeedge 19825 -sharededge 19825 -max_solid 0 -max_shell 0 -max_face 0 -max_freewire 139 -max_freeedge 19825
checkmaxtol res_2 -tol 1.000100004e-07 -avg 1.000000175e-07 -max_tol ${max_tol_res_1}

