puts "============"
puts "OCC28091"
puts "============"
puts ""
######################################################
# Creation of test cases in order to provide simple porting Hole detection algorithm to new OCCT-version
######################################################

# IsCorrectCoincindence method

restore [locate_data_file bug28091_PC23RETROFITVS5.brep] srcshape

# Test

foreach a [ directory fcan* ] { unset $a }

cylinder cylf2 82.00000000000000000000 65.50000000000000000000 12.00000000000000000000 -0.00000000000000049343 -1.00000000000000000000 0.00000000000000000000 1.00000000000000000000 -0.00000000000000049343 0.00000000000000000000 1.00000000000000000000
mkface fcan2 cylf2 0.0 6.28318530717958620000 -12.00000000000000000000 12.00000000000000000000

cylinder cylf3 20.00000000000000000000 36.00000000000000000000 18.50000000000000000000 -1.00000000000000000000 0.00000000000000000000 0.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 0.00000000000000000000 2.00000000000000000000
mkface fcan3 cylf3 0.0 6.28318530717958620000 -42.22425723475373600000 34.05448142751686900000

cylinder cylf5 82.00000000000000000000 0.00000000000000000000 23.25000000000000000000 0.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 0.00000000000000000000 0.00000000000000000000 4.50000000000000000000
mkface fcan5 cylf5 0.0 6.28318530717958620000 -0.34999999999999998000 0.69999999999999996000

cylinder cylf7 5.00000000000000000000 36.00000000000000000000 30.00000000000000000000 0.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.70710678118654757000 0.00000000000000000000 0.70710678118654757000 5.00000000000000000000
mkface fcan7 cylf7 0.0 6.28318530717958620000 -108.00000000000000000000 108.00000000000000000000

cylinder cylf10 9.50000000000000000000 7.50000000000000000000 20.00000000000000000000 0.00000000000000049343 -1.00000000000000000000 -0.00000000000000000000 1.00000000000000000000 0.00000000000000049343 -0.00000000000000008449 5.50000000000000000000
mkface fcan10 cylf10 0.0 6.28318530717958620000 -22.50000000000000000000 22.50000000000000000000

cylinder cylf12 39.50000000000000000000 7.50000000000000000000 20.00000000000000000000 0.00000000000000049343 -1.00000000000000000000 -0.00000000000000000000 1.00000000000000000000 0.00000000000000049343 -0.00000000000000008449 5.50000000000000000000
mkface fcan12 cylf12 0.0 6.28318530717958620000 -22.50000000000000000000 22.50000000000000000000

cylinder cylf14 91.00000000000000000000 4.09999999999999960000 30.00000000000000000000 0.00000000000000049343 -1.00000000000000000000 0.00000000000000000000 1.00000000000000000000 0.00000000000000049343 0.00000000000000000000 3.00000000000000000000
mkface fcan14 cylf14 0.0 6.28318530717958620000 -12.29999999999999900000 12.29999999999999900000

cylinder cylf16 73.00000000000000000000 4.09999999999999960000 5.00000000000000000000 0.00000000000000049343 -1.00000000000000000000 0.00000000000000000000 1.00000000000000000000 0.00000000000000049343 0.00000000000000000000 3.00000000000000000000
mkface fcan16 cylf16 0.0 6.28318530717958620000 -12.29999999999999900000 12.29999999999999900000

cylinder cylf18 91.00000000000000000000 4.09999999999999960000 5.00000000000000000000 0.00000000000000049343 -1.00000000000000000000 0.00000000000000000000 1.00000000000000000000 0.00000000000000049343 0.00000000000000000000 3.00000000000000000000
mkface fcan18 cylf18 0.0 6.28318530717958620000 -12.29999999999999900000 12.29999999999999900000

cylinder cylf20 73.00000000000000000000 4.09999999999999960000 30.00000000000000000000 0.00000000000000049343 -1.00000000000000000000 0.00000000000000000000 1.00000000000000000000 0.00000000000000049343 0.00000000000000000000 3.00000000000000000000
mkface fcan20 cylf20 0.0 6.28318530717958620000 -12.29999999999999900000 12.29999999999999900000

cylinder cylf23 82.00000000000000000000 0.00000000000000000000 23.25000000000000000000 0.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 0.00000000000000000000 0.00000000000000000000 6.00000000000000000000
mkface fcan23 cylf23 0.0 6.28318530717958620000 -0.34999999999999998000 0.69999999999999996000

cylinder cylf25 9.50000000000000000000 64.50000000000000000000 20.00000000000000000000 -0.00000000000000019032 1.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 -0.00000000000000019032 0.00000000000000000000 5.50000000000000000000
mkface fcan25 cylf25 0.0 6.28318530717958620000 -22.50000000000000000000 22.50000000000000000000

cylinder cylf27 39.50000000000000000000 64.50000000000000000000 20.00000000000000000000 -0.00000000000000019032 1.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 -0.00000000000000019032 0.00000000000000000000 5.50000000000000000000
mkface fcan27 cylf27 0.0 6.28318530717958620000 -22.50000000000000000000 22.50000000000000000000

cylinder cylf29 73.00000000000000000000 67.90000000000000600000 5.00000000000000000000 -0.00000000000000019032 1.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 -0.00000000000000019032 0.00000000000000000000 3.00000000000000000000
mkface fcan29 cylf29 0.0 6.28318530717958620000 -12.29999999999999700000 12.29999999999999000000

cylinder cylf31 91.00000000000000000000 67.90000000000000600000 5.00000000000000000000 -0.00000000000000019032 1.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 -0.00000000000000019032 0.00000000000000000000 3.00000000000000000000
mkface fcan31 cylf31 0.0 6.28318530717958620000 -12.29999999999999700000 12.29999999999999000000

cylinder cylf33 73.00000000000000000000 67.90000000000000600000 30.00000000000000000000 -0.00000000000000019032 1.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 -0.00000000000000019032 0.00000000000000000000 3.00000000000000000000
mkface fcan33 cylf33 0.0 6.28318530717958620000 -12.29999999999999700000 12.29999999999999000000

cylinder cylf35 91.00000000000000000000 67.90000000000000600000 30.00000000000000000000 -0.00000000000000019032 1.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 -0.00000000000000019032 0.00000000000000000000 3.00000000000000000000
mkface fcan35 cylf35 0.0 6.28318530717958620000 -12.29999999999999700000 12.29999999999999000000

cylinder cylf37 82.00000000000000000000 72.00000000000000000000 23.25000000000000000000 -0.00000000000000014081 1.00000000000000000000 0.00000000000000012246 -1.00000000000000000000 -0.00000000000000014081 -0.00000000000000000000 6.00000000000000000000
mkface fcan37 cylf37 0.0 6.28318530717958620000 -0.69999999999998863000 0.34999999999999432000

cylinder cylf38 82.00000000000000000000 72.00000000000000000000 23.25000000000000000000 -0.00000000000000014081 1.00000000000000000000 0.00000000000000012246 -1.00000000000000000000 -0.00000000000000014081 -0.00000000000000000000 4.50000000000000000000
mkface fcan38 cylf38 0.0 6.28318530717958620000 -0.69999999999998863000 0.34999999999999432000

cylinder cylf41 64.52279384289200000000 53.77612102372499700000 23.25000000000000000000 0.69216658047959478000 0.72173778123857746000 -0.00000000000000009162 -0.72173778123857746000 0.69216658047959478000 0.00000000000000000000 2.00000000000000000000
mkface fcan41 cylf41 0.0 6.28318530717958620000 -69.31899588837893600000 75.42127531553995800000

cylinder cylf42 6.00000000000000000000 36.00000000000000000000 18.50000000000000000000 -1.00000000000000000000 0.00000000000000000000 0.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 0.00000000000000000000 4.28300000000000040000
mkface fcan42 cylf42 0.0 6.28318530717958620000 -14.00000000000000000000 16.00000000000000000000

cylinder cylf43 44.00000000000000000000 36.00000000000000000000 16.00000000000000000000 0.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 -1.00000000000000000000 0.00000000000000000000 0.00000000000000000000 7.47499999999999960000
mkface fcan43 cylf43 0.0 6.28318530717958620000 -38.00000000000000000000 43.00000000000000000000

cylinder cylf45 64.52279384289200000000 18.22387897627500000000 23.25000000000000000000 -0.69216658047959478000 0.72173778123857746000 0.00000000000000018001 -0.72173778123857746000 -0.69216658047959478000 -0.00000000000000008477 2.00000000000000000000
mkface fcan45 cylf45 0.0 6.28318530717958620000 -75.41033473486599800000 69.31352559804199100000

cylinder cylf46 57.00000000000000000000 3.50000000000000000000 15.50000000000000000000 0.00000000000000049343 -1.00000000000000000000 0.00000000000000000000 1.00000000000000000000 0.00000000000000049343 0.00000000000000000000 5.72250000000000010000
mkface fcan46 cylf46 0.0 6.28318530717958620000 -10.50000000000000000000 10.50000000000000000000

cylinder cylf48 57.00000000000000000000 68.50000000000000000000 15.50000000000000000000 -0.00000000000000019032 1.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 -0.00000000000000019032 0.00000000000000000000 5.72250000000000010000
mkface fcan48 cylf48 0.0 6.28318530717958620000 -10.50000000000000000000 10.50000000000000000000

cylinder cylf50 82.00000000000000000000 70.75000000000000000000 12.00000000000000000000 -0.00000000000000049343 -1.00000000000000000000 0.00000000000000000000 1.00000000000000000000 -0.00000000000000049343 0.00000000000000000000 4.50000000000000000000
mkface fcan50 cylf50 0.0 6.28318530717958620000 -3.75000000000000000000 3.75000000000000000000

cylinder cylf52 95.00000000000000000000 57.50000000000000000000 15.50000000000000000000 -1.00000000000000000000 0.00000000000000007041 0.00000000000000000000 -0.00000000000000007041 -1.00000000000000000000 0.00000000000000000000 6.00000000000000000000
mkface fcan52 cylf52 0.0 6.28318530717958620000 -34.22746117386799400000 50.11373058693399700000

cylinder cylf55 69.75000000000000000000 57.50000000000000000000 15.50000000000000000000 -1.00000000000000000000 0.00000000000000007041 0.00000000000000000000 -0.00000000000000007041 -1.00000000000000000000 0.00000000000000000000 3.32350000000000010000
mkface fcan55 cylf55 0.0 6.28318530717958620000 -8.49699999999600660000 9.12349999999800330000

cylinder cylf57 68.38062474979899700000 57.50000000000000000000 15.50000000000000000000 -1.00000000000000000000 -0.00000000000000007041 -0.00000000000001537232 -0.00000000000001537232 0.00000000000000000000 1.00000000000000000000 3.25000000000000000000
mkface fcan57 cylf57 0.0 6.28318530717958620000 -0.15812575060201084000 5.95812575060101320000

cylinder cylf59 61.06803398874900100000 57.50000000000000000000 15.50000000000000000000 -1.00000000000000000000 -0.00000000000000007041 -0.00000000000001537232 -0.00000000000001537232 0.00000000000000000000 1.00000000000000000000 2.00000000000100010000
mkface fcan59 cylf59 0.0 6.28318530717958620000 -5.49589803375004490000 5.49589803375008050000

cylinder cylf61 109.50000000000000000000 57.50000000000000000000 15.50000000000000000000 -1.00000000000000000000 0.00000000000000007041 0.00000000000000000000 -0.00000000000000007041 -1.00000000000000000000 0.00000000000000000000 7.47499999999999960000
mkface fcan61 cylf61 0.0 6.28318530717958620000 -22.50000000000000000000 22.50000000000000000000

cylinder cylf62 82.00000000000000000000 1.25000000000000000000 12.00000000000000000000 0.00000000000000049343 -1.00000000000000000000 0.00000000000000000000 1.00000000000000000000 0.00000000000000049343 0.00000000000000000000 4.50000000000000000000
mkface fcan62 cylf62 0.0 6.28318530717958620000 -3.75000000000000000000 3.75000000000000000000

cylinder cylf64 82.00000000000000000000 6.50000000000000000000 12.00000000000000000000 0.00000000000000049343 -1.00000000000000000000 0.00000000000000000000 1.00000000000000000000 0.00000000000000049343 0.00000000000000000000 1.00000000000000000000
mkface fcan64 cylf64 0.0 6.28318530717958620000 -12.00000000000000000000 12.00000000000000000000

cylinder cylf66 95.00000000000000000000 14.50000000000000000000 15.50000000000000000000 1.00000000000000000000 0.00000000000000007041 0.00000000000000000000 -0.00000000000000007041 1.00000000000000000000 0.00000000000000000000 6.00000000000000000000
mkface fcan66 cylf66 0.0 6.28318530717958620000 -50.11373058693399700000 34.22746117386799400000

cylinder cylf69 69.75000000000000000000 14.50000000000000000000 15.50000000000000000000 1.00000000000000000000 0.00000000000000007041 0.00000000000000000000 -0.00000000000000007041 1.00000000000000000000 0.00000000000000000000 3.32350000000000010000
mkface fcan69 cylf69 0.0 6.28318530717958620000 -9.12349999999800330000 8.49699999999600660000

cylinder cylf71 68.38062474979899700000 14.50000000000000000000 15.50000000000000000000 -1.00000000000000000000 -0.00000000000000007041 -0.00000000000001537232 -0.00000000000001537232 0.00000000000000000000 1.00000000000000000000 3.25000000000000000000
mkface fcan71 cylf71 0.0 6.28318530717958620000 -0.15812575060201084000 5.95812575060101320000

cylinder cylf73 61.06803398874900100000 14.50000000000000000000 15.50000000000000000000 -1.00000000000000000000 -0.00000000000000007041 -0.00000000000001537232 -0.00000000000001537232 0.00000000000000000000 1.00000000000000000000 2.00000000000100010000
mkface fcan73 cylf73 0.0 6.28318530717958620000 -5.49589803375004490000 5.49589803375008050000

cylinder cylf75 109.50000000000000000000 14.50000000000000000000 15.50000000000000000000 1.00000000000000000000 0.00000000000000007041 0.00000000000000000000 -0.00000000000000007041 1.00000000000000000000 0.00000000000000000000 7.47499999999999960000
mkface fcan75 cylf75 0.0 6.28318530717958620000 -22.50000000000000000000 22.50000000000000000000

cylinder cylf76 57.00000000000000000000 138.95682782791999000000 15.50000000000000000000 0.00000000000000049343 -1.00000000000000000000 0.00000000000000000000 1.00000000000000000000 0.00000000000000049343 0.00000000000000000000 3.00000000000000000000
mkface fcan76 cylf76 0.0 6.28318530717958620000 20.86435693383998600000 185.04929872201001000000

cylinder cylf77 61.06803398874900100000 36.00000000000000000000 15.50000000000000000000 -1.00000000000000000000 -0.00000000000000007041 -0.00000000000001537232 -0.00000000000001537232 0.00000000000000000000 1.00000000000000000000 2.00000000000100010000
mkface fcan77 cylf77 0.0 6.28318530717958620000 -5.49589803375004490000 5.49589803375008050000

cylinder cylf79 68.38062474979899700000 36.00000000000000000000 15.50000000000000000000 -1.00000000000000000000 -0.00000000000000007041 -0.00000000000001537232 -0.00000000000001537232 0.00000000000000000000 1.00000000000000000000 3.25000000000000000000
mkface fcan79 cylf79 0.0 6.28318530717958620000 -0.06979923960599876400 5.91396249510300720000

cylinder cylf81 83.00000000000000000000 24.00000000000000000000 35.00000000000000000000 0.00000000000000000000 0.66913060635913257000 -0.74314482547714722000 -0.00000000000000027988 -0.74314482547714722000 -0.66913060635913257000 1.25000000000000000000
mkface fcan81 cylf81 0.0 6.28318530717958620000 -22.14842052283000800000 40.87411100446101400000

cylinder cylf82 83.00000000000000000000 48.00000000000000000000 35.00000000000000000000 0.00000000000000000000 0.66913060635913257000 0.74314482547714722000 -0.00000000000000027988 0.74314482547714722000 -0.66913060635913257000 1.25000000000000000000
mkface fcan82 cylf82 0.0 6.28318530717958620000 -40.87146844009299700000 22.14709924064600300000

cylinder cylf83 83.00000000000000000000 24.00000000000000000000 35.00000000000000000000 0.00000000000000000000 0.66913060635913257000 -0.74314482547714722000 -0.00000000000000027988 -0.74314482547714722000 -0.66913060635913257000 1.25000000000000000000
mkface fcan83 cylf83 0.0 6.28318530717958620000 -22.14842052283000800000 40.87411100446101400000

cylinder cylf84 83.00000000000000000000 48.00000000000000000000 35.00000000000000000000 0.00000000000000000000 0.66913060635913257000 0.74314482547714722000 -0.00000000000000027988 0.74314482547714722000 -0.66913060635913257000 1.25000000000000000000
mkface fcan84 cylf84 0.0 6.28318530717958620000 -40.87146844009299700000 22.14709924064600300000

cylinder cylf85 95.00000000000000000000 36.00000000000000000000 15.50000000000000000000 1.00000000000000000000 0.00000000000000007041 0.00000000000000000000 -0.00000000000000007041 1.00000000000000000000 0.00000000000000000000 6.00000000000000000000
mkface fcan85 cylf85 0.0 6.28318530717958620000 -50.11373058693399700000 34.22746117386799400000

cylinder cylf88 69.75000000000000000000 36.00000000000000000000 15.50000000000000000000 1.00000000000000000000 0.00000000000000007041 0.00000000000000000000 -0.00000000000000007041 1.00000000000000000000 0.00000000000000000000 3.32350000000000010000
mkface fcan88 cylf88 0.0 6.28318530717958620000 -9.12349999999800330000 8.49699999999600660000

cylinder cylf90 109.50000000000000000000 36.00000000000000000000 15.50000000000000000000 1.00000000000000000000 0.00000000000000007041 0.00000000000000000000 -0.00000000000000007041 1.00000000000000000000 0.00000000000000000000 7.47499999999999960000
mkface fcan90 cylf90 0.0 6.28318530717958620000 -22.50000000000000000000 22.50000000000000000000

cylinder cylf91 112.00000000000000000000 36.00000000000000000000 30.00000000000000000000 0.00000000000000007041 -1.00000000000000000000 0.00000000000000000000 0.70710678118654757000 0.00000000000000004979 0.70710678118654757000 5.00000000000000000000
mkface fcan91 cylf91 0.0 6.28318530717958620000 -108.00000000000000000000 108.00000000000000000000

sewing sh srcshape
eval compound [ explode sh w ] cmpwir

compound result
foreach ff [ directory fcan* ] {
  copy cmpwir cco
  bclearobjects 
  bcleartools
  eval baddobjects [explode cco]
  baddtools $ff
  bfillds
  bbuild fc
  foreach fr [explode fc f] {
    add $fr result
  }  
}

checknbshapes result -face 180
checkshape result
checkprops result -s 57927.9

checkview -display result -2d -path ${imagedir}/${test_image}.png 
