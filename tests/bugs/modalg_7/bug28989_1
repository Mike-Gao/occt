puts "======="
puts "OCC28989"
puts "======="
puts ""
##################################################
# testgrid bugs modalg_7 bug28892
##################################################

binrestore [locate_data_file bug28892_tools.bin] b

explode b
# fuse only the inclined cone-like shapes
don b_6 b_7 b_8 b_9

bfuzzyvalue 1.e-4

bclearobjects
bcleartools
baddobjects b_6 b_7 b_8 b_9
bfillds
bbuild result

bfuzzyvalue 0

checkshape result
checknbshapes result -wire 29 -face 29 -shell 13 -solid 13
checkprops result -s 2.39928e+006 -v 5.4582e+007

if {![regexp "OK" [bopcheck result]]} {
  puts "Error: result is self-interfered"
}

checkview -display result -2d -path ${imagedir}/${test_image}.png