puts "============"
puts "OCC28091"
puts "============"
puts ""
######################################################
# Creation of test cases in order to provide simple porting Hole detection algorithm to new OCCT-version
######################################################

# IsCorrectCoincindence method

restore [locate_data_file bug28091_RB11_PG_00441_02.brep] srcshape

# Test

foreach a [ directory fcan* ] { unset $a }

cylinder cylf3 273.00373126821000000000 2040.50846494600000000000 0.00000000000000000000 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 30.00000000000000000000
mkface fcan3 cylf3 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf4 303.00373126821000000000 2022.00002092699990000000 0.00000000000000000000 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 5.25000000000000000000
mkface fcan4 cylf4 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf5 321.51217528708997000000 1992.00002092699990000000 0.00000000000099475983 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 30.00000000000000000000
mkface fcan5 cylf5 0.0 6.28318530717958620000 -9.00000000000200020000 18.00000000000101600000

cylinder cylf7 391.39517868869001000000 1992.00002092699990000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 30.00000000000000000000
mkface fcan7 cylf7 0.0 6.28318530717958620000 -9.00000000000098410000 18.00000000000196800000

cylinder cylf8 409.90362270756998000000 2022.00002092699990000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 5.25000000000000000000
mkface fcan8 cylf8 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf9 439.90162270757003000000 2040.51170631800010000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 30.00000000000000000000
mkface fcan9 cylf9 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf13 444.80362270723998000000 1816.99641939200000000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 247.00362246442000000000
mkface fcan13 cylf13 0.0 6.28318530717958620000 -9.00000000000211390000 18.00000000000115800000

cylinder cylf18 668.51541665875004000000 1816.90211324900000000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 30.00000000000000000000
mkface fcan18 cylf18 0.0 6.28318530717958620000 -9.00000000000204640000 18.00000000000102300000

cylinder cylf19 650.00373126815998000000 1786.90411324899990000000 0.00000000000099475983 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 5.25000000000000000000
mkface fcan19 cylf19 0.0 6.28318530717958620000 -9.00000000000100360000 18.00000000000200700000

cylinder cylf20 620.00573126816005000000 1768.39242785900000000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 30.00000000000000000000
mkface fcan20 cylf20 0.0 6.28318530717958620000 -9.00000000000204640000 18.00000000000102300000

cylinder cylf27 628.51206672645003000000 1084.00002092799990000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 30.00000000000000000000
mkface fcan27 cylf27 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf28 610.00362270757000000000 1054.00002092799990000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 5.25000000000000000000
mkface fcan28 cylf28 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf29 580.00362270757000000000 1035.49157690900010000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 30.00000000000000000000
mkface fcan29 cylf29 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf31 580.00362270757000000000 1028.50846494700000000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 30.00000000000000000000
mkface fcan31 cylf31 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf32 610.00362270757000000000 1010.00002092800000000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 5.25000000000000000000
mkface fcan32 cylf32 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf33 628.51206672645003000000 980.00002092783996000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 30.00000000000000000000
mkface fcan33 cylf33 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf40 620.00573126816005000000 295.60761399757001000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 30.00000000000000000000
mkface fcan40 cylf40 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf41 650.00373126815998000000 277.09592860698001000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 5.25000000000000000000
mkface fcan41 cylf41 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf42 668.51541665875004000000 247.09792860697999000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 30.00000000000000000000
mkface fcan42 cylf42 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf46 444.80362270723998000000 247.00362246442000000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 247.00362246442000000000
mkface fcan46 cylf46 0.0 6.28318530717958620000 -8.99999999999998050000 17.99999999999996100000

cylinder cylf49 70.00373126716499400000 23.49157690663000200000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 30.00000000000000000000
mkface fcan49 cylf49 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf50 40.00373126833900300000 42.00002092741600300000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 5.25000000000000000000
mkface fcan50 cylf50 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf51 21.49528724945900000000 72.00002092741600300000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 30.00000000000000000000
mkface fcan51 cylf51 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf56 52.70369978610200000000 1977.00002092699990000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 6.00000000000000000000
mkface fcan56 cylf56 0.0 6.28318530717958620000 -9.00000000000204640000 18.00000000000102300000

cylinder cylf59 89.89451851081800300000 1992.00002092699990000000 0.00000000000000000000 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 30.00000000000000000000
mkface fcan59 cylf59 0.0 6.28318530717958620000 -9.00000000000100540000 18.00000000000201100000

cylinder cylf60 108.40296252969000000000 2022.00002092699990000000 0.00000000000000000000 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 5.25000000000000000000
mkface fcan60 cylf60 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf61 138.40296252969000000000 2040.50846494600000000000 0.00000000000000000000 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 30.00000000000000000000
mkface fcan61 cylf61 0.0 6.28318530717958620000 -9.00000000000000000000 18.00000000000000000000

cylinder cylf64 141.39545867509000000000 1385.40740876199990000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 10.00000000000000000000
mkface fcan64 cylf64 0.0 6.28318530717958620000 -9.00000000000204640000 18.00000000000102300000

cylinder cylf66 476.39545867509003000000 1385.40740876199990000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 10.00000000000000000000
mkface fcan66 cylf66 0.0 6.28318530717958620000 -9.00000000000204640000 18.00000000000102300000

cylinder cylf68 476.39545867509003000000 1907.40740876199990000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 10.00000000000000000000
mkface fcan68 cylf68 0.0 6.28318530717958620000 -9.00000000000204640000 18.00000000000102300000

cylinder cylf70 141.39545867509000000000 1907.40740876199990000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 10.00000000000000000000
mkface fcan70 cylf70 0.0 6.28318530717958620000 -9.00000000000204640000 18.00000000000102300000

cylinder cylf70 141.39545867509000000000 1907.40740876199990000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 10.00000000000000000000
mkface fcan70 cylf70 0.0 6.28318530717958620000 -9.00000000000204640000 18.00000000000102300000

cylinder cylf72 685.80724541490997000000 1792.90411324899990000000 0.00000000000099475983 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 6.00000000000000000000
mkface fcan72 cylf72 0.0 6.28318530717958620000 -9.00000000000100010000 18.00000000000200000000

cylinder cylf73 644.00374541490999000000 1060.00002092799990000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 6.00000000000000000000
mkface fcan73 cylf73 0.0 6.28318530717958620000 -9.00000000000203390000 18.00000000000099800000

cylinder cylf74 644.00374541490999000000 1004.00002092800000000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 6.00000000000000000000
mkface fcan74 cylf74 0.0 6.28318530717958620000 -9.00000000000202680000 18.00000000000098400000

cylinder cylf75 685.80724541490997000000 271.09592860698001000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 6.00000000000000000000
mkface fcan75 cylf75 0.0 6.28318530717958620000 -9.00000000000202680000 18.00000000000098400000

cylinder cylf76 46.00373126605499900000 6.00000000000000000000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 6.00000000000000000000
mkface fcan76 cylf76 0.0 6.28318530717958620000 -9.00000000000401630000 18.00000000000197900000

cylinder cylf77 6.00000000000000000000 48.00002092741600300000 0.00000000000201794137 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 6.00000000000000000000
mkface fcan77 cylf77 0.0 6.28318530717958620000 -9.00000000000401630000 18.00000000000197900000

cylinder cylf78 40.70369978610200000000 2016.00002092699990000000 0.00000000000099475983 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 6.00000000000000000000
mkface fcan78 cylf78 0.0 6.28318530717958620000 -9.00000000000100010000 18.00000000000200000000

cylinder cylf79 64.70369978610200700000 2016.00002092699990000000 0.00000000000099475983 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 6.00000000000000000000
mkface fcan79 cylf79 0.0 6.28318530717958620000 -9.00000000000100010000 18.00000000000200000000

cylinder cylf80 114.40296252969000000000 2056.00002092700020000000 0.00000000000099475983 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 6.00000000000000000000
mkface fcan80 cylf80 0.0 6.28318530717958620000 -9.00000000000298960000 18.00000000000299500000

cylinder cylf81 6.00000000000000000000 2016.00002092699990000000 0.00000000000099475983 0.00000000000000000000 0.00000000000000000000 1.00000000000000000000 1.00000000000000000000 0.00000000000000000000 -0.00000000000000000000 6.00000000000000000000
mkface fcan81 cylf81 0.0 6.28318530717958620000 -9.00000000000100010000 18.00000000000200000000

cylinder cylf82 18.00373091680700100000 142.00002092740999000000 0.00000000000000000000 -0.00000000000000034348 -0.00000000000000060120 1.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 -0.00000000000000060120 3.25000000000000000000
mkface fcan82 cylf82 0.0 6.28318530717958620000 -6.00000000000000000000 12.00000000000000000000

cylinder cylf83 18.00373091680700100000 735.33335426073995000000 0.00000000000099475983 -0.00000000000000034348 -0.00000000000000060120 1.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 -0.00000000000000060120 3.25000000000000000000
mkface fcan83 cylf83 0.0 6.28318530717958620000 -6.00000000000000000000 12.00000000000000000000

cylinder cylf84 18.00373091680599900000 1328.66668759400000000000 0.00000000000099475983 -0.00000000000000034348 -0.00000000000000060120 1.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 -0.00000000000000060120 3.25000000000000000000
mkface fcan84 cylf84 0.0 6.28318530717958620000 -6.00000000000000000000 12.00000000000000000000

cylinder cylf85 18.00373091680599900000 1922.00002092699990000000 0.00000000000201794137 -0.00000000000000034348 -0.00000000000000060120 1.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 -0.00000000000000060120 3.25000000000000000000
mkface fcan85 cylf85 0.0 6.28318530717958620000 -6.00000000000000000000 12.00000000000000000000

cylinder cylf86 632.00373126567001000000 735.33335426073995000000 -0.01038243931001000100 -0.00000000000000034348 -0.00000000000000060120 1.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 -0.00000000000000060120 3.25000000000000000000
mkface fcan86 cylf86 0.0 6.28318530717958620000 -5.98961756068900010000 12.01038243931100000000

cylinder cylf87 632.00373126567001000000 1328.66668759400000000000 -0.01038243931001000100 -0.00000000000000034348 -0.00000000000000060120 1.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 -0.00000000000000060120 3.25000000000000000000
mkface fcan87 cylf87 0.0 6.28318530717958620000 -5.98961756068900010000 12.01038243931100000000

cylinder cylf88 549.09715848122005000000 142.00002092739001000000 -0.01038243931001000100 -0.00000000000000034348 -0.00000000000000060120 1.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 -0.00000000000000060120 3.25000000000000000000
mkface fcan88 cylf88 0.0 6.28318530717958620000 -5.98961756068900010000 12.01038243931100000000

cylinder cylf89 549.09715848122005000000 1922.00002092699990000000 -0.01038243931001000100 -0.00000000000000034348 -0.00000000000000060120 1.00000000000000000000 0.00000000000000000000 -1.00000000000000000000 -0.00000000000000060120 3.25000000000000000000
mkface fcan89 cylf89 0.0 6.28318530717958620000 -5.98961756068795910000 12.01038243931197900000

sewing sh srcshape
eval compound [ explode sh w ] cmpwir

compound result
foreach ff [ directory fcan* ] {
  copy cmpwir cco
  bclearobjects 
  bcleartools
  eval baddobjects [explode cco]
  baddtools $ff
  bfillds
  bbuild fc
  foreach fr [explode fc f] {
    add $fr result
  }  
}

checknbshapes result -face 109
checkshape result
checkprops result -s 193285

checkview -display result -2d -path ${imagedir}/${test_image}.png 
