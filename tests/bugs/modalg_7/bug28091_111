puts "============"
puts "OCC28091"
puts "============"
puts ""
######################################################
# Creation of test cases in order to provide simple porting Hole detection algorithm to new OCCT-version
######################################################

# IsCorrectCoincindence method

restore [locate_data_file bug28091_handlauf_kruemmer.brep] srcshape

# Test

foreach a [ directory fcan* ] { unset $a }

cylinder cylf1 178.77237918818000000000 263.62977252858002000000 121.34522213149999000000 0.00000000000000000000 -0.84799830400514420000 -0.52999894000309011000 0.91257304423379026000 -0.21672384368300338000 0.34675814989288717000 4.00000000000000000000
mkface fcan1 cylf1 0.0 6.28318530717958620000 -37.50000000000565600000 37.50000000001126900000

cylinder cylf3 178.77237918818000000000 263.62977252858002000000 121.34522213149999000000 0.00000000000000000000 -0.84799830400514420000 -0.52999894000309011000 0.91257304423379026000 -0.21672384368300338000 0.34675814989288717000 4.00000000000000000000
mkface fcan3 cylf3 0.0 6.28318530717958620000 -37.50000000000565600000 37.50000000001126900000

cylinder cylf5 92.07793998599500200000 284.21853767849001000000 88.40319789165299400000 0.00000000000000000000 -0.84799830400514420000 -0.52999894000309011000 0.91257304423379026000 -0.21672384368300338000 0.34675814989288717000 4.00000000000000000000
mkface fcan5 cylf5 0.0 6.28318530717958620000 -37.50000000000213200000 37.50000000000422100000

cylinder cylf7 92.07793998599500200000 284.21853767849001000000 88.40319789165299400000 0.00000000000000000000 -0.84799830400514420000 -0.52999894000309011000 0.91257304423379026000 -0.21672384368300338000 0.34675814989288717000 4.00000000000000000000
mkface fcan7 cylf7 0.0 6.28318530717958620000 -37.50000000000213200000 37.50000000000422100000

cylinder cylf8 265.46681839038001000000 243.04100737867000000000 154.28724637136000000000 0.00000000000000000000 -0.84799830400514420000 -0.52999894000309011000 0.91257304423379026000 -0.21672384368300338000 0.34675814989288717000 4.00000000000000000000
mkface fcan8 cylf8 0.0 6.28318530717958620000 -37.50000000000565600000 37.50000000001126900000

cylinder cylf10 265.46681839038001000000 243.04100737867000000000 154.28724637136000000000 0.00000000000000000000 -0.84799830400514420000 -0.52999894000309011000 0.91257304423379026000 -0.21672384368300338000 0.34675814989288717000 4.00000000000000000000
mkface fcan10 cylf10 0.0 6.28318530717958620000 -37.50000000000565600000 37.50000000001126900000

cylinder cylf13 12.50000000000000000000 125.38333636146000000000 21.37167791462799800000 1.00000000000000000000 0.00000000000000000000 0.00000000000000000000 0.00000000000000000000 -0.99916288838045930000 -0.04090870913653880300 4.00000000000000000000
mkface fcan13 cylf13 0.0 6.28318530717958620000 -37.50000000000000000000 37.50000000000000000000

cylinder cylf15 12.50000000000000000000 125.38333636146000000000 21.37167791462799800000 1.00000000000000000000 0.00000000000000000000 0.00000000000000000000 0.00000000000000000000 -0.99916288838045930000 -0.04090870913653880300 4.00000000000000000000
mkface fcan15 cylf15 0.0 6.28318530717958620000 -37.50000000000000000000 37.50000000000000000000

cylinder cylf16 12.50000000000000000000 220.30381075760999000000 25.25800528259799900000 1.00000000000000000000 0.00000000000000000000 0.00000000000000000000 0.00000000000000000000 -0.99916288838045930000 -0.04090870913653880300 4.00000000000000000000
mkface fcan16 cylf16 0.0 6.28318530717958620000 -37.50000000000000000000 37.50000000000000000000

cylinder cylf18 12.50000000000000000000 220.30381075760999000000 25.25800528259799900000 1.00000000000000000000 0.00000000000000000000 0.00000000000000000000 0.00000000000000000000 -0.99916288838045930000 -0.04090870913653880300 4.00000000000000000000
mkface fcan18 cylf18 0.0 6.28318530717958620000 -37.50000000000000000000 37.50000000000000000000

cylinder cylf19 12.50000000000000000000 30.46286196532399900000 17.48535054665800100000 1.00000000000000000000 0.00000000000000000000 0.00000000000000000000 0.00000000000000000000 -0.99916288838045930000 -0.04090870913653880300 4.00000000000000000000
mkface fcan19 cylf19 0.0 6.28318530717958620000 -37.50000000000000000000 37.50000000000000000000

cylinder cylf21 12.50000000000000000000 30.46286196532399900000 17.48535054665800100000 1.00000000000000000000 0.00000000000000000000 0.00000000000000000000 0.00000000000000000000 -0.99916288838045930000 -0.04090870913653880300 4.00000000000000000000
mkface fcan21 cylf21 0.0 6.28318530717958620000 -37.50000000000000000000 37.50000000000000000000

sewing sh srcshape
eval compound [ explode sh w ] cmpwir

compound result
foreach ff [ directory fcan* ] {
  copy cmpwir cco
  bclearobjects 
  bcleartools
  eval baddobjects [explode cco]
  baddtools $ff
  bfillds
  bbuild fc
  foreach fr [explode fc f] {
    add $fr result
  }  
}

checknbshapes result -face 48
checkshape result
checkprops result -s 22619.5

checkview -display result -2d -path ${imagedir}/${test_image}.png 
